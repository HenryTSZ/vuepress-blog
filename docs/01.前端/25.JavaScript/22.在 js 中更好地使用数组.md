---
layout: post
title: åœ¨ js ä¸­æ›´å¥½åœ°ä½¿ç”¨æ•°ç»„
date: 2018-07-29 00:00:00
categories: 
  - FrontEnd
  - Js
tags: 
  - Js
permalink: /pages/5b8821/
---

å…³äºæ•°ç»„æ–¹æ³•çš„ä½¿ç”¨ä¸Š, æˆ‘ä»¬ç»å¸¸ä¼šçŠ¯ä¸€äº›é”™è¯¯, å› æ­¤æœ‰äº†è¿™ç¯‡æ–‡ç« . è®©æˆ‘ä»¬ä¸€èµ·å­¦ä¹ , ä»¥ç¡®ä¿ä»¥åèƒ½æ­£ç¡®åœ°ä½¿ç”¨æ•°ç»„æ–¹æ³•!

<!-- more -->

## ä½¿ç”¨ `Array.includes` æ›¿ä»£ `Array.indexOf`

> "å¦‚æœéœ€è¦åœ¨æ•°ç»„ä¸­æŸ¥æ‰¾æŸä¸ªå…ƒç´ , è¯·ä½¿ç”¨ `Array.indexOf` ."

æˆ‘è®°å¾—åœ¨æˆ‘å­¦ä¹  JavaScript çš„è¯¾ç¨‹ä¸­æœ‰ç±»ä¼¼çš„è¿™ä¹ˆä¸€å¥è¯. æ¯«æ— ç–‘é—®, è¿™å®Œå…¨æ­£ç¡®!

åœ¨ MDN æ–‡æ¡£ä¸­, å¯¹ `Array.indexOf` çš„æè¿°æ˜¯: è¿”å›åœ¨æ•°ç»„ä¸­å¯ä»¥æ‰¾åˆ°ä¸€ä¸ªç»™å®šå…ƒç´ çš„ç¬¬ä¸€ä¸ªç´¢å¼•, å¦‚æœä¸å­˜åœ¨, åˆ™è¿”å›-1. å› æ­¤, å¦‚æœåœ¨ä¹‹åçš„ä»£ç ä¸­éœ€è¦ç”¨åˆ°(ç»™å®šå…ƒç´ çš„)ç´¢å¼•, é‚£ä¹ˆ `Array.indexOf` æ˜¯ä¸äºŒä¹‹é€‰.

ç„¶è€Œ, å¦‚æœæˆ‘ä»¬ä»…éœ€è¦çŸ¥é“æ•°ç»„ä¸­æ˜¯å¦åŒ…å«ç»™å®šå…ƒç´ å‘¢? è¿™æ„å‘³ç€åªæ˜¯æ˜¯ä¸å¦çš„åŒºåˆ«, è¿™æ˜¯ä¸€ä¸ªå¸ƒå°”é—®é¢˜(boolean question). é’ˆå¯¹è¿™ç§æƒ…å†µ, æˆ‘å»ºè®®ä½¿ç”¨ç›´æ¥è¿”å›å¸ƒå°”å€¼çš„ `Array.includes` .

```js
'use strict'

const characters = ['ironman', 'black_widow', 'hulk', 'captain_america', 'hulk', 'thor']

console.log(characters.indexOf('hulk'))
// 2
console.log(characters.indexOf('batman'))
// -1

console.log(characters.includes('hulk'))
// true
console.log(characters.includes('batman'))
// false
```

## ä½¿ç”¨ `Array.find` æ›¿ä»£ `Array.filter`

`Array.filter` æ˜¯ä¸€ä¸ªååˆ†æœ‰ç”¨çš„æ–¹æ³•. å®ƒé€šè¿‡å›è°ƒå‡½æ•°è¿‡æ»¤åŸæ•°ç»„, å¹¶å°†è¿‡æ»¤åçš„é¡¹ä½œä¸ºæ–°æ•°ç»„è¿”å›. æ­£å¦‚å®ƒçš„åå­—æ‰€ç¤º, æˆ‘ä»¬å°†è¿™ä¸ªæ–¹æ³•ç”¨äºè¿‡æ»¤, (ä¸€èˆ¬è€Œè¨€)ä¼šè·å¾—ä¸€ä¸ªé•¿åº¦æ›´çŸ­çš„æ–°æ•°ç»„.

ç„¶è€Œ, å¦‚æœçŸ¥é“ç»å›è°ƒå‡½æ•°è¿‡æ»¤å, åªä¼šå‰©ä½™å”¯ä¸€çš„ä¸€é¡¹, é‚£ä¹ˆæˆ‘ä¸å»ºè®®ä½¿ç”¨ `Array.filter` . æ¯”å¦‚: ä½¿ç”¨ç­‰äºæŸä¸ªå”¯ä¸€ ID ä¸ºè¿‡æ»¤æ¡ä»¶å»è¿‡æ»¤ä¸€ä¸ªæ•°ç»„. åœ¨è¿™ä¸ªä¾‹å­ä¸­, `Array.filter` è¿”å›ä¸€ä¸ªä»…æœ‰ä¸€é¡¹çš„æ–°æ•°ç»„. ç„¶è€Œ, æˆ‘ä»¬ä»…ä»…æ˜¯ä¸ºäº†è·å– ID ä¸ºç‰¹å®š ID çš„é‚£ä¸€é¡¹, è¿™ä¸ªæ–°æ•°ç»„æ˜¾å¾—æ¯«æ— ç”¨å¤„.

è®©æˆ‘ä»¬è®¨è®ºä¸€ä¸‹æ€§èƒ½. ä¸ºäº†è·å–æ‰€æœ‰ç¬¦åˆå›è°ƒå‡½æ•°è¿‡æ»¤æ¡ä»¶çš„é¡¹, `Array.filter` å¿…é¡»éå†æ•´ä¸ªæ•°ç»„. å¦‚æœåŸæ•°ç»„ä¸­æœ‰æˆåƒä¸Šä¸‡é¡¹, å›è°ƒå‡½æ•°éœ€è¦æ‰§è¡Œçš„æ¬¡æ•°æ˜¯ç›¸å½“å¤šçš„.

ä¸ºé¿å…è¿™äº›æƒ…å†µ, æˆ‘å»ºè®®ä½¿ç”¨ `Array.find` . å®ƒä¸ `Array.filter` ä¸€æ ·éœ€è¦ä¸€ä¸ªå›è°ƒå‡½æ•°, (ä½†åªæ˜¯è¿”å›)ç¬¦åˆæ¡ä»¶çš„ç¬¬ä¸€é¡¹. å½“æ‰¾åˆ°ç¬¦åˆå›è°ƒå‡½æ•°è¿‡æ»¤æ¡ä»¶çš„ç¬¬ä¸€ä¸ªå…ƒç´ æ—¶, å®ƒä¼šç«‹å³åœæ­¢å¾€ä¸‹çš„æœå¯». ä¸å†éå†æ•´ä¸ªæ•°ç»„.

```js
'use strict'

const characters = [
  {
    id: 1,
    name: 'ironman'
  },
  {
    id: 2,
    name: 'black_widow'
  },
  {
    id: 3,
    name: 'captain_america'
  },
  {
    id: 4,
    name: 'captain_america'
  }
]

function getCharacter(name) {
  return character => character.name === name
}

console.log(characters.filter(getCharacter('captain_america')))
// [
//   { id: 3, name: 'captain_america' },
//   { id: 4, name: 'captain_america' },
// ]

console.log(characters.find(getCharacter('captain_america')))
// { id: 3, name: 'captain_america' }
```

## ä½¿ç”¨ `Array.some` æ›¿ä»£ `Array.find`

æˆ‘æ‰¿è®¤æˆ‘ç»å¸¸çŠ¯è¿™ä¸ªé”™è¯¯. ä¹‹å, ä¸€ä½æœ‹å‹å»ºè®®æˆ‘å»æŸ¥çœ‹ [MDN æ–‡æ¡£](https://link.juejin.im?target=https%3A%2F%2Fdeveloper.mozilla.org%2Fen-US%2Fdocs%2FWeb%2FJavaScript%2FReference%2FGlobal_Objects%2FArray%23Methods_2) ä»¥å¯»æ‰¾æ›´å¥½çš„æ–¹æ³•. äº‹å®ä¸Š(è¿™é”™è¯¯)ä¸ä¸Šé¢ `Array.indexOf` / `Array.includes` çš„ä¾‹å­ååˆ†ç›¸åƒ.

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, æˆ‘ä»¬çŸ¥é“ `Array.find` éœ€è¦ä¸€ä¸ªå›è°ƒå‡½æ•°ä½œä¸ºå‚æ•°, å¹¶è¿”å›(ç¬¦åˆæ¡ä»¶çš„)ç¬¬ä¸€ä¸ªå…ƒç´ . ç„¶è€Œ, å½“æˆ‘ä»¬éœ€è¦çŸ¥é“æ•°ç»„ä¸­æ˜¯å¦å­˜åœ¨ä¸€ä¸ªå…ƒç´ æ—¶, `Array.find` æ˜¯æœ€å¥½çš„é€‰æ‹©å—? ä¸ä¸€å®šæ˜¯, å› ä¸ºå®ƒè¿”å›ä¸€ä¸ªå…ƒç´ , è€Œä¸æ˜¯ä¸€ä¸ªå¸ƒå°”å€¼.

åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­, æˆ‘å»ºè®®ä½¿ç”¨ `Array.some` , å®ƒè¿”å›ä½ éœ€è¦çš„å¸ƒå°”å€¼.

```js
'use strict'

const characters = [
  {
    id: 1,
    name: 'ironman',
    env: 'marvel'
  },
  {
    id: 2,
    name: 'black_widow',
    env: 'marvel'
  },
  {
    id: 3,
    name: 'wonder_woman',
    env: 'dc_comics'
  }
]

function hasCharacterFrom(env) {
  return character => character.env === env
}

console.log(characters.find(hasCharacterFrom('marvel')))
// { id: 1, name: 'ironman', env: 'marvel' }

console.log(characters.some(hasCharacterFrom('marvel')))
// true
```

è¡¥å……ä¸€ä¸‹ `Array.some` ä¸ `Array.includes` ä½¿ç”¨ä¸Šçš„åŒºåˆ«. ä¸¤è€…éƒ½è¿”å›ä¸€ä¸ªå¸ƒå°”å€¼, è¡¨ç¤ºæŸé¡¹æ˜¯å¦å­˜åœ¨äºæ•°ç»„ä¹‹ä¸­, ä¸€æ—¦æ‰¾åˆ°å¯¹åº”çš„é¡¹, ç«‹å³åœæ­¢éå†æ•°ç»„. ä¸åŒçš„æ˜¯ `Array.some` çš„å‚æ•°æ˜¯å›è°ƒå‡½æ•°, è€Œ `Array.includes` çš„å‚æ•°æ˜¯ä¸€ä¸ªå€¼(å‡ä¸è€ƒè™‘ç¬¬äºŒä¸ªå¯é€‰å‚æ•°).

å‡è®¾å¸Œæœ›çŸ¥é“å€¼ä¸º `value` çš„é¡¹æ˜¯å¦å­˜åœ¨äºæ•°ç»„ä¸­, æ—¢å¯ä»¥ç¼–å†™ä»£ç : `[].includes(value)` , ä¹Ÿå¯ä»¥ç»™ `Array.some` ä¼ å…¥ `item => item === value` ä½œä¸ºå›è°ƒå‡½æ•°. `Array.includes` ä½¿ç”¨æ›´ç®€å•, `Array.some` å¯æ“æ§æ€§æ›´å¼º.

## ä½¿ç”¨ `Array.reduce` æ›¿ä»£ `Array.filter` ä¸ `Array.map` çš„ç»„åˆ

äº‹å®ä¸Šè¯´, `Array.reduce` ä¸å¤ªå®¹æ˜“ç†è§£. ç„¶è€Œ, å¦‚æœæˆ‘ä»¬å…ˆä½¿ç”¨ `Array.filter` è¿‡æ»¤åŸæ•°ç»„, ä¹‹å(å¯¹ç»“æœ)å†è°ƒç”¨ `Array.map` (ä»¥è·å–ä¸€ä¸ªæ–°æ•°ç»„). è¿™çœ‹èµ·ä¼¼ä¹æœ‰ç‚¹é—®é¢˜, æ˜¯æˆ‘ä»¬å¿½ç•¥äº†ä»€ä¹ˆå—?

è¿™æ ·åšçš„é—®é¢˜æ˜¯: æˆ‘ä»¬éå†äº†ä¸¤æ¬¡æ•°ç»„. ç¬¬ä¸€æ¬¡æ˜¯è¿‡æ»¤åŸæ•°ç»„ä»¥è·å–ä¸€ä¸ªé•¿åº¦ç¨çŸ­çš„æ–°æ•°ç»„, ç¬¬äºŒæ¬¡éå†( `Array.map` )æ˜¯å¯¹ `Array.filter` çš„è¿”å›çš„æ–°æ•°ç»„è¿›è¡ŒåŠ å·¥, å†æ¬¡åˆ›é€ äº†ä¸€ä¸ªæ–°æ•°ç»„! ä¸ºå¾—åˆ°æœ€ç»ˆçš„ç»“æœ, æˆ‘ä»¬ç»“åˆä½¿ç”¨äº†ä¸¤ä¸ªæ•°ç»„æ–¹æ³•. æ¯ä¸ªæ–¹æ³•éƒ½æœ‰å®ƒè‡ªå·±çš„å›è°ƒå‡½æ•°, è€Œä¸”ä¾› `Array.map` ä½¿ç”¨çš„ä¸´æ—¶æ•°ç»„æ˜¯ç”± `Array.filter` æä¾›çš„, (ä¸€èˆ¬è€Œè¨€)è¯¥æ•°ç»„æ— æ³•å¤ç”¨.

ä¸ºé¿å…å¦‚æ­¤ä½æ•ˆåœºæ™¯çš„å‡ºç°, æˆ‘çš„å»ºè®®æ˜¯ä½¿ç”¨ `Array.reduce` . ä¸€æ ·çš„ç»“æœ, æ›´å¥½çš„ä»£ç ! `Array.reduce` å…è®¸ä½ å°†è¿‡æ»¤ååˆ‡åŠ å·¥è¿‡çš„é¡¹æ”¾è¿›ç´¯åŠ å™¨ä¸­. ç´¯åŠ å™¨å¯ä»¥æ˜¯éœ€è¦å¾…é€’å¢çš„æ•°å­—ã€å¾…å¡«å……çš„å¯¹è±¡ã€ å¾…æ‹¼æ¥çš„å­—ç¬¦ä¸²æˆ–æ•°ç»„ç­‰.

åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­, æˆ‘ä»¬ä½¿ç”¨äº† `Array.map` , (ä½†æ›´)å»ºè®®ä½¿ç”¨ç´¯åŠ å™¨ä¸ºå¾…æ‹¼æ¥æ•°ç»„çš„ `Array.reduce` . åœ¨ä¸‹é¢çš„ä¾‹å­ä¸­, æ ¹æ®å˜é‡ `env` çš„å€¼, æˆ‘ä»¬ä¼šå°†å®ƒåŠ è¿›ç´¯åŠ å™¨ä¸­æˆ–ä¿æŒç´¯åŠ å™¨ä¸å˜(å³ä¸ä½œä»»ä½•å¤„ç†).

```js
'use strict'

const characters = [
  {
    name: 'ironman',
    env: 'marvel'
  },
  {
    name: 'black_widow',
    env: 'marvel'
  },
  {
    name: 'wonder_woman',
    env: 'dc_comics'
  }
]

console.log(
  characters
    .filter(character => character.env === 'marvel')
    .map(character =>
      Object.assign({}, character, {
        alsoSeenIn: ['Avengers']
      })
    )
)
// [
//   { name: 'ironman', env: 'marvel', alsoSeenIn: ['Avengers'] },
//   { name: 'black_widow', env: 'marvel', alsoSeenIn: ['Avengers'] }
// ]

console.log(
  characters.reduce((acc, character) => {
    return character.env === 'marvel'
      ? acc.concat(
          Object.assign({}, character, {
            alsoSeenIn: ['Avengers']
          })
        )
      : acc
  }, [])
)
// [
//   { name: 'ironman', env: 'marvel', alsoSeenIn: ['Avengers'] },
//   { name: 'black_widow', env: 'marvel', alsoSeenIn: ['Avengers'] }
// ]
```

## è¿™å°±æ˜¯æœ¬æ–‡çš„å…¨éƒ¨å†…å®¹!

å¸Œæœ›è¿™å¯¹ä½ æœ‰å¸®åŠ©. å¦‚æœä½ å¯¹æœ¬æ–‡æœ‰ä»»ä½•æ„è§æˆ–(å…³äºæ•°ç»„æ–¹æ³•ä½¿ç”¨çš„)ä¾‹å­éœ€è¦è®¨è®º, è¯·åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘. å¦‚æœä½ è§‰å¾—æœ¬æ–‡ä¸é”™, è¯·ç»™æˆ‘ç‚¹èµ ğŸ‘ å¹¶åˆ†äº«ç»™æ›´å¤šçš„å°ä¼™ä¼´. æ„Ÿè°¢ä½ çš„é˜…è¯»!
